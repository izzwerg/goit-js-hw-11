{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nform.addEventListener('submit', imageSearch);\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst BASE_URL = 'https://pixabay.com/api';\nconst API_KEY = '11329962-6436ba51ddb58bb96deed169a';\n\nfunction imageSearch(e) {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  loader.classList.add('is-visible');\n\n  const form = e.currentTarget;\n  const searchTerm = form.elements.searchTerm.value;\n\n  console.log(searchTerm);\n  getImages(searchTerm)\n    .then(images => {\n      console.log(images.hits);\n      if ((images.hits == 0)) {\n        noFoundMessage();\n      } else {\n        let markup = '';\n        for (const image of images.hits) {\n          markup += createMarkup(image);\n        }\n        gallery.innerHTML = markup;\n        const lightbox = new SimpleLightbox('.gallery a');\n        lightbox.refresh();\n      }\n    })\n    .catch(errorMessage())\n    .finally(() => form.reset());\n}\n\nfunction getImages(searchTerm) {\n  const urlParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchTerm,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 9,\n  });\n\n  return fetch(`${BASE_URL}/?${urlParams}`).then(res => {\n    if (!res.ok) {\n      throw new Error(res.statusText);\n    }\n    return res.json();\n  });\n}\n\nfunction createMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <div class=\"image-details\">\n        <p>Likes </br> ${likes}</p>\n        <p>Views </br>  ${views}</p>\n        <p>Comments </br>  ${comments}</p>\n        <p>Downloads </br>  ${downloads}</p>\n    </div>\n    </li>`;\n}\n\nfunction noFoundMessage() {\n  iziToast.show({\n    position: 'topRight',\n    messageColor: 'white',\n    iconUrl: 'error.svg',\n    iconColor: 'white',\n    color: '#EF4040',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n  loader.classList.remove('is-visible');\n}\n\nfunction errorMessage() {\n  iziToast.show({\n    position: 'topRight',\n    messageColor: 'white',\n    iconUrl: 'error.svg',\n    iconColor: 'white',\n    color: '#EF4040',\n    message: 'Whoops, something went wrong!',\n  });\n  loader.classList.remove('is-visible');\n}\n"],"names":["form","imageSearch","gallery","loader","BASE_URL","API_KEY","e","searchTerm","getImages","images","noFoundMessage","markup","image","createMarkup","SimpleLightbox","errorMessage","urlParams","res","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAW,EAC3C,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,0BACXC,EAAU,qCAEhB,SAASJ,EAAYK,EAAG,CACtBA,EAAE,eAAc,EAChBJ,EAAQ,UAAY,GACpBC,EAAO,UAAU,IAAI,YAAY,EAEjC,MAAMH,EAAOM,EAAE,cACTC,EAAaP,EAAK,SAAS,WAAW,MAE5C,QAAQ,IAAIO,CAAU,EACtBC,EAAUD,CAAU,EACjB,KAAKE,GAAU,CAEd,GADA,QAAQ,IAAIA,EAAO,IAAI,EAClBA,EAAO,MAAQ,EAClBC,QACK,CACL,IAAIC,EAAS,GACb,UAAWC,KAASH,EAAO,KACzBE,GAAUE,EAAaD,CAAK,EAE9BV,EAAQ,UAAYS,EACH,IAAIG,EAAe,YAAY,EACvC,QAAO,CACjB,CACP,CAAK,EACA,MAAMC,EAAY,CAAE,EACpB,QAAQ,IAAMf,EAAK,MAAK,CAAE,CAC/B,CAEA,SAASQ,EAAUD,EAAY,CAC7B,MAAMS,EAAY,IAAI,gBAAgB,CACpC,IAAKX,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,CACd,CAAG,EAED,OAAO,MAAM,GAAGH,MAAaY,GAAW,EAAE,KAAKC,GAAO,CACpD,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,UAAU,EAEhC,OAAOA,EAAI,MACf,CAAG,CACH,CAEA,SAASJ,EAAa,CACpB,aAAAK,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,oCAC2BL;AAAA,0CACMD,WAAsBE;AAAA;AAAA;AAAA,yBAGvCC;AAAA,0BACCC;AAAA,6BACGC;AAAA,8BACCC;AAAA;AAAA,UAG9B,CAEA,SAASd,GAAiB,CACxBe,EAAS,KAAK,CACZ,SAAU,WACV,aAAc,QACd,QAAS,YACT,UAAW,QACX,MAAO,UACP,QACE,0EACN,CAAG,EACDtB,EAAO,UAAU,OAAO,YAAY,CACtC,CAEA,SAASY,GAAe,CACtBU,EAAS,KAAK,CACZ,SAAU,WACV,aAAc,QACd,QAAS,YACT,UAAW,QACX,MAAO,UACP,QAAS,+BACb,CAAG,EACDtB,EAAO,UAAU,OAAO,YAAY,CACtC"}